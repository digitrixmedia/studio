
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the DineMitra POS system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "role": {
          "type": "string",
          "description": "The user's role within the cafe (Admin, Manager, Cashier, Waiter, Kitchen Staff)."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "role",
        "email"
      ]
    },
    "MenuItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MenuItem",
      "type": "object",
      "description": "Represents an item on the cafe's menu.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the menu item."
        },
        "name": {
          "type": "string",
          "description": "Name of the menu item (e.g., Cafe Latte)."
        },
        "price": {
          "type": "number",
          "description": "Price of the menu item."
        },
        "category": {
          "type": "string",
          "description": "Category of the menu item (e.g., Hot Coffee)."
        },
        "description": {
          "type": "string",
          "description": "Description of the menu item."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the image for the menu item.",
          "format": "uri"
        },
        "taxRate": {
          "type": "number",
          "description": "Applicable tax rate for the menu item (GST slab)."
        },
        "isAvailable": {
          "type": "boolean",
          "description": "Flag indicating whether the item is currently available."
        }
      },
      "required": [
        "id",
        "name",
        "price",
        "category"
      ]
    },
    "Ingredient": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Ingredient",
      "type": "object",
      "description": "Represents a raw material used in menu items.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ingredient."
        },
        "name": {
          "type": "string",
          "description": "Name of the ingredient (e.g., Coffee Beans, Milk)."
        },
        "unit": {
          "type": "string",
          "description": "Unit of measurement for the ingredient (e.g., gms, ml)."
        },
        "stockLevel": {
          "type": "number",
          "description": "Current stock level of the ingredient."
        },
        "minimumThreshold": {
          "type": "number",
          "description": "Minimum stock level threshold for triggering low stock alerts."
        }
      },
      "required": [
        "id",
        "name",
        "unit",
        "stockLevel",
        "minimumThreshold"
      ]
    },
    "Table": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Table",
      "type": "object",
      "description": "Represents a table in the cafe.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the table."
        },
        "name": {
          "type": "string",
          "description": "Name of the table (e.g., Table 1, Sofa Seating)."
        },
        "status": {
          "type": "string",
          "description": "Current status of the table (Vacant, Occupied, Billing)."
        }
      },
      "required": [
        "id",
        "name",
        "status"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents a customer order.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order."
        },
        "orderType": {
          "type": "string",
          "description": "Type of order (Dine-In, Takeaway, Delivery)."
        },
        "tableId": {
          "type": "string",
          "description": "Reference to Table. (Relationship: Table 1:N Order) Nullable for Takeaway/Delivery orders."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Order)"
        },
        "orderDate": {
          "type": "string",
          "description": "Date and time the order was placed.",
          "format": "date-time"
        },
        "totalAmount": {
          "type": "number",
          "description": "Total amount of the order."
        }
      },
      "required": [
        "id",
        "orderType",
        "customerId",
        "orderDate",
        "totalAmount"
      ]
    },
    "OrderItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OrderItem",
      "type": "object",
      "description": "Represents an item within an order.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order item."
        },
        "orderId": {
          "type": "string",
          "description": "Reference to Order. (Relationship: Order 1:N OrderItem)"
        },
        "menuItemId": {
          "type": "string",
          "description": "Reference to MenuItem. (Relationship: MenuItem 1:N OrderItem)"
        },
        "quantity": {
          "type": "number",
          "description": "Quantity of the menu item in the order."
        },
        "itemPrice": {
          "type": "number",
          "description": "Price of the item at the time of the order."
        },
        "customizations": {
          "type": "string",
          "description": "Stringified JSON of customizations like size and add-ons at time of order to persist customer choice."
        }
      },
      "required": [
        "id",
        "orderId",
        "menuItemId",
        "quantity",
        "itemPrice"
      ]
    },
    "Outlet": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Outlet",
      "type": "object",
      "description": "Represents a single franchise outlet.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the outlet."
        },
        "ownerId": {
          "type": "string",
          "description": "The UID of the user with the 'admin' role who owns this outlet."
        }
      },
      "required": [
        "name",
        "ownerId"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Uses path-based ownership for private user data."
        }
      },
      {
        "path": "/outlets/{outletId}",
        "definition": {
          "entityName": "Outlet",
          "schema": {
            "$ref": "#/backend/entities/Outlet"
          },
          "description": "Top-level collection for all franchise outlets. Each document represents one outlet."
        }
      },
      {
        "path": "/outlets/{outletId}/settings/{settingsId}",
        "definition": {
          "description": "Stores user-specific application settings for a given outlet."
        }
      },
      {
        "path": "/outlets/{outletId}/menu_items/{menuItemId}",
        "definition": {
          "entityName": "MenuItem",
          "schema": {
            "$ref": "#/backend/entities/MenuItem"
          },
          "description": "Subcollection storing menu items specific to an outlet."
        }
      },
      {
        "path": "/outlets/{outletId}/ingredients/{ingredientId}",
        "definition": {
          "entityName": "Ingredient",
          "schema": {
            "$ref": "#/backend/entities/Ingredient"
          },
          "description": "Subcollection storing ingredients specific to an outlet."
        }
      },
      {
        "path": "/outlets/{outletId}/tables/{tableId}",
        "definition": {
          "entityName": "Table",
          "schema": {
            "$ref": "#/backend/entities/Table"
          },
          "description": "Subcollection storing table information for an outlet."
        }
      },
      {
        "path": "/outlets/{outletId}/orders/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/backend/entities/Order"
          },
          "description": "Subcollection storing orders for an outlet."
        }
      },
      {
        "path": "/outlets/{outletId}/orders/{orderId}/order_items/{orderItemId}",
        "definition": {
          "entityName": "OrderItem",
          "schema": {
            "$ref": "#/backend/entities/OrderItem"
          },
          "description": "Subcollection storing items within an order for an outlet."
        }
      }
    ]
  }
}
